<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>审查注册信息</title>
    <script type="text/javascript" src="js/company_authority.js"></script>
    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/JQuery.js"></script>

</head>
<body>
<div class="content_container">

<div id="company_credit_info">
    <table style="width :100%;">
        <tbody>
        <tr>
            <td class="table_head">
                申请企业
            </td>
            <td class="table_head">
                电话
            </td>
            <td class="table_head">
                email
            </td>
            <td class="table_head">
                信用值
            </td>
        </tr>

        <tr v-for ="item in GuarantyCompanyInfo">
            <td>{{ item['name'] }}</td>
            <td>{{ item['telNum'] }}</td>
            <td>{{ item['emailAddress'] }}</td>
            <td>{{ item['credit']}}</td>
        </tr>
        </tbody>
    </table>
    <p style="text-align:center;"><label v-on:click="">上一页</label><label>当前页：{{currentPage}}</label><label v-on:click="next_pages">下一页</label></p>
    <button v-on:click="click_listener()">获取申请企业的信息</button>

</div>
    <script>
        new Vue({
            el: '#company_credit_info',
            data :{

                GuarantyCompanyInfo :[],
                currentPage:1,
            },
            methods:{
                getData: function (page) {
                    var result =' ';
                    //deal with parameter
                    $.ajax({
                        method: "GET" ,
                        url: "/api/Authorization/reviewInfo/getComoanyInfo",
                        async: false,
                        data:{
                            pages:page,
                        },

                        beforeSend: function (request) {
                            request.setRequestHeader("user_id_token", "12345");
                        },
                        success : function(data)
                        {

                            result=data;

                        }


                    });

                    return result;

                },
                click_listener: function () {
                    result = this.getData(this.currentPage);

                    this.GuarantyCompanyInfo= result;
                },
                next_pages:function () {

                    this.currentPage = this.currentPage + 1;
                    result = this.getData(this.currentPage);
                    this.GuarantyCompanyInfo = result;


                },
                last_pages:function () {
                    this.currentPage = this.currentPage - 1;
                    result = this.getData(this.currentPage);
                    this.GuarantyCompanyInfo = result;

                }

            }
        })
    </script>

</div>

</body>
</html>