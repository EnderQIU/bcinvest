<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script>

        </script>
        <script type="text/javascript" src="js/JQuery.js"></script>
        <script type="text/javascript" src="js/bank_authority.js"></script>
        <script type="text/javascript" src="js/vue.js"></script>
        <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/bootbox.min.js"></script>
        <style>
            html {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            label {
                font-weight: 400;
                margin-bottom: 0;
            }
            .body_header {
                width: 100%;
                height: 80px;
                background: rgba(36, 36, 36, 0.6);
                color: white;
                position: relative;
            }
            .body_header .header_title {
                position: absolute;
                left: 50%;
                font-size: 32px;
                top: 50%;
                transform: translate(-50%, -50%);
            }
            .body_header .right_button {
                margin: 0;
                padding: 0;
                right: 30px;
                float: right;
                position: relative;
                top: 50%;
                transform: translateY(-52%);
                display: flex;
                flex-direction: row;
                align-items: center;
            }
            .body_header .bank_name {
                padding-right: 24px;
                font-size: 18px;
                text-decoration: underline;
                cursor: pointer;
            }
            .body_header .log_out {
                color: white;
            }
            .main_body {
                width: 100%;
                display: flex;
            }
            .list_container {
                float: left;
                border-right: 1px solid black;
                flex-shrink: 0;
            }
            .list_container .list_content {
                list-style: none;
                margin: 0;
                padding: 0;
            }
            .list_container .list_item {
                padding: 10px 20px 10px 20px;
                margin: 0 0 6px 0;
                cursor: pointer;
            }
            .content_container {
                flex-grow: 5;
                padding: 20px;
                flex-shrink: 100000000;
            }
            .list_container .item_selected {
                background-color: #CCCCCC;
                font-weight: 600;
            }
            .searchBar{
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                width: 50%;
                height: 30%;
                padding: 30px;
            }
            .searchbtn{
                background: none;
                border: none;
                outline:none !important;
                box-shadow: none !important;
            }

            .content_table {
                border-spacing: 0;
                width: 100%;
                border-color: grey;
                border-collapse: separate;
                font-size: 16px;
                color: #444444;
                font-family: 'Microsoft YaHei UI',serif;
            }
            /*头部*/
            .content_table th {
                text-align: left;
                text-shadow: 0 1px 0 rgba(255, 255, 255, .5);
                border-bottom: 1px solid #CCCCCC;
                background: #EEEEEE;
                background-image: linear-gradient(top, #F5F5F5, #CCCCCC);
                padding: 10px;
            }
            .content_table th:first-child {
                border-radius: 6px 0 0 0;
            }
            .content_table th:last-child {
                border-radius: 0 6px 0 0;
            }
            /*尾部  因为我们这里尾部只有一个td所有采用了没注销的那个  否则应该使用注销的那种*/
            /*.content_table tfoot td:first-child {*/
                /*border-radius: 0 0 0 6px;*/
            /*}*/
            /*.content_table tfoot td:last-child {*/
                /*border-radius: 0 0 6px 0;*/
            /*}*/
            .content_table tfoot td {
                border-radius: 0 0 6px 6px;
            }
            .content_table tfoot td {
                border-bottom: 0;
                border-top: 1px solid #FFFFFF;
                background-color: #F1F1F1;
            }
            /*table的body或者公用属性*/
            .content_table td {
                padding: 10px;
                border-bottom: 1px solid #F2F2F2;
            }
            .content_table tr:nth-child(even) {
                background: #f5f5f5;
                box-shadow: 0 1px 0 rgba(255,255,255,.8) inset;
            }

            .page_change_container {
                text-align: center;
            }
            .page_change_container .page_change {
                text-decoration: underline;
                cursor: pointer;
            }
            .page_change_container .current_page {
                color: darkorange;
            }
            .house_detail{
                display: none;
            }
            .land_detail{
                display: none;
            }
            .machine_detail{
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="body_header" id="body_header">
            <label class="header_title">银行中心</label>
            <div class="right_button">
                <label class="bank_name" v-on:click="reload_page()">{{ bank_name }}</label>
                <a class="log_out" v-on:click="log_out()">
                    登出
                </a>
            </div>
        </div>
        <div class="main_body" id="main_body">
            <div class="list_container">
                <ul class="list_content">
                    <li class="list_item" v-for="(item, i) in list_item_str"  v-on:click="select_item(i)" v-bind:class="[list_selected_index == i ? list_selected_class : '']">
                        {{ list_item_data[item].label_text }}
                    </li>
                </ul>

            </div>
            <div class="content_container">
                <div style="width: 100%" v-if="list_item_str[list_selected_index] == 'repay_confirm'">
                    <table style="width: 100%;">
                        <tr>
                            <td class="table_head">抵押物名称</td>
                            <td class="table_head">操作</td>
                        </tr>
                        <tr v-for="item in repay_confirm_guaranty">
                            <td class="table_cell">{{ item.name }}</td>
                            <td class="table_cell">
                                <label v-on:click="repay_confirm_confirm_repay_click(item)" style="cursor: pointer; text-decoration: underline;">确认</label>&nbsp;&nbsp;
                                <label v-on:click="repay_confirm_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看详情</label>
                            </td>
                        </tr>
                    </table>
                    <div class="page_change_container" v-if="max_page > 0">
                        <label v-if="current_page > 0" class="page_change" v-on:click="repay_confirm_aimed_page(1)">首页</label>
                        <label v-if="current_page > 1" class="page_change" v-on:click="repay_confirm_aimed_page(current_page - 1)">上一页</label>
                        <label v-if="current_page > 2" class="page_change" v-on:click="repay_confirm_aimed_page(current_page - 2)">{{ current_page - 2 }}</label>
                        <label v-if="current_page > 1" class="page_change" v-on:click="repay_confirm_aimed_page(current_page - 1)">{{ current_page - 1 }}</label>
                        <label class="current_page" v-if="current_page > 0">{{ current_page }}</label>
                        <label v-if="current_page < max_page" class="page_change" v-on:click="repay_confirm_aimed_page(current_page + 1)">{{ current_page + 1 }}</label>
                        <label v-if="current_page + 1 < max_page" class="page_change" v-on:click="repay_confirm_aimed_page(current_page + 2)">{{ current_page + 2 }}</label>
                        <label v-if="current_page < max_page" class="page_change" v-on:click="repay_confirm_aimed_page(current_page + 1)">下一页</label>
                        <label v-if="current_page > 0" class="page_change" v-on:click="repay_confirm_aimed_page(max_page)">尾页</label>
                    </div>
                    <div class="page_change_container" v-else>
                        无内容
                    </div>
                    <!-- 模态框（Modal） -->
                    <div class="modal fade" id="repay_confirm_detail_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">抵押物详情</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group">
                                        <label>名称：</label><span id = "repay_confirm_guaranty_name"></span><br>
                                        <label>估值：</label><span id = "repay_confirm_guaranty_value"></span><br>
                                        <label>拥有者姓名:</label><span id = "repay_confirm_guaranty_owner"></span><br>
                                        <label>权利范围:</label><span id = "repay_confirm_guaranty_scope"></span><br>
                                        <label>状态：</label><span id = "repay_confirm_guaranty_state"></span><br>
                                        <label>类型：</label><span id = "repay_confirm_guaranty_type"></span><br>
                                        <div class = "house_detail">
                                            <label>地址：</label><span id = "repay_confirm_house_addr" ></span><br>
                                            <label>邮编：</label><span id = "repay_confirm_house_zip"></span><br>
                                            <label>房产证号:</label><span id = "repay_confirm_house_certificatedId"></span><br>
                                        </div>
                                        <div class = "land_detail">
                                            <label>地址:</label><span id = "repay_confirm_land_addr"></span><br>
                                            <label>面积：</label><span id = "repay_confirm_land_area"></span><br>

                                        </div>
                                        <div class = "machine_detail">
                                            <label>使用天数：</label><span id = "repay_confirm_machine_usedDays"></span><br>
                                            <label>生产商：</label><span id = "repay_confirm_machine_producer"></span><br>
                                            <label>型号：</label><span id = "repay_confirm_machine_model"></span><br>
                                        </div>

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "close">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="width: 100%" v-else-if="list_item_str[list_selected_index] == 'login_apply'">
                    <table class="content_table">
                        <thead>
                            <tr>
                                <th class="table_head">企业名称</th>
                                <th class="table_head">操作</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <td colspan="2">
                                    <div class="page_change_container" v-if="max_page > 0">
                                        <label v-if="current_page > 0" class="page_change" v-on:click="login_apply_company_aimed_page(1)">首页</label>
                                        <label v-if="current_page > 1" class="page_change" v-on:click="login_apply_company_aimed_page(current_page - 1)">上一页</label>
                                        <label v-if="current_page > 2" class="page_change" v-on:click="login_apply_company_aimed_page(current_page - 2)">{{ current_page - 2 }}</label>
                                        <label v-if="current_page > 1" class="page_change" v-on:click="login_apply_company_aimed_page(current_page - 1)">{{ current_page - 1 }}</label>
                                        <label class="current_page" v-if="current_page > 0">{{ current_page }}</label>
                                        <label v-if="current_page < max_page" class="page_change" v-on:click="login_apply_company_aimed_page(current_page + 1)">{{ current_page + 1 }}</label>
                                        <label v-if="current_page + 1 < max_page" class="page_change" v-on:click="login_apply_company_aimed_page(current_page + 2)">{{ current_page + 2 }}</label>
                                        <label v-if="current_page < max_page" class="page_change" v-on:click="login_apply_company_aimed_page(current_page + 1)">下一页</label>
                                        <label v-if="current_page > 0" class="page_change" v-on:click="login_apply_company_aimed_page(max_page)">尾页</label>
                                    </div>
                                    <div class="page_change_container" v-else>
                                        无内容
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                        <tr v-for="item in login_apply_company">
                            <td class="table_cell">{{ item.name }}</td>
                            <td class="table_cell">
                                <label v-on:click="login_apply_company_pass_login_click(item)" style="cursor: pointer; text-decoration: underline;">通过</label>&nbsp;&nbsp;
                                <label v-on:click="login_apply_company_unpass_login_click(item)" style="cursor: pointer; text-decoration: underline;">拒绝</label>&nbsp;&nbsp;
                                <label v-on:click="login_apply_view_company_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看详情</label>
                            </td>
                        </tr>
                    </table>

                    <div class="modal fade" id="company_detail_model" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">企业详情</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group" id = "company_detail">
                                        <label>名称：</label><span id = "company_name"></span><br>
                                        <label>电话：</label><span id = "company_tel"></span><br>
                                        <label>邮件:</label><span id = "company_email"></span><br>
                                        <label>信用:</label><span id = "company_credit"></span><br>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "close_company">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="width: 100%" v-else-if="list_item_str[list_selected_index] == 'guaranty_to_tbc'">
                    <table class="content_table">
                        <thead>
                            <tr>
                                <th class="table_head">抵押物名称</th>
                                <th class="table_head">操作</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <td colspan="2">
                                    <div class="page_change_container" v-if="max_page > 0">
                                        <label v-if="current_page > 0" class="page_change" v-on:click="to_tbc_aimed_page(1)">首页</label>
                                        <label v-if="current_page > 1" class="page_change" v-on:click="to_tbc_aimed_page(current_page - 1)">上一页</label>
                                        <label v-if="current_page > 2" class="page_change" v-on:click="to_tbc_aimed_page(current_page - 2)">{{ current_page - 2 }}</label>
                                        <label v-if="current_page > 1" class="page_change" v-on:click="to_tbc_aimed_page(current_page - 1)">{{ current_page - 1 }}</label>
                                        <label class="current_page" v-if="current_page > 0">{{ current_page }}</label>
                                        <label v-if="current_page < max_page" class="page_change" v-on:click="to_tbc_aimed_page(current_page + 1)">{{ current_page + 1 }}</label>
                                        <label v-if="current_page + 1 < max_page" class="page_change" v-on:click="to_tbc_aimed_page(current_page + 2)">{{ current_page + 2 }}</label>
                                        <label v-if="current_page < max_page" class="page_change" v-on:click="to_tbc_aimed_page(current_page + 1)">下一页</label>
                                        <label v-if="current_page > 0" class="page_change" v-on:click="to_tbc_aimed_page(max_page)">尾页</label>
                                    </div>
                                    <div class="page_change_container" v-else>
                                        无内容
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                        <tr v-for="item in qualified_guaranties">
                            <td class="table_cell">{{ item.name }}</td>
                            <td class="table_cell">
                                <label v-on:click="guaranty_to_tbc_confirm_to_tbc(item)" style="cursor: pointer; text-decoration: underline;">确认</label>&nbsp;&nbsp;
                                <label v-on:click="guaranty_to_tbc_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看详情</label>
                            </td>
                    </table>

                    <!-- 模态框（Modal） -->
                    <div class="modal fade" id="guaranty_detail_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">抵押物详情</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group" id = "guaranty_detail">
                                        <label>名称：</label><span id = "guaranty_name"></span><br>
                                        <label>估值：</label><span id = "guaranty_value"></span><br>
                                        <label>拥有者姓名:</label><span id = "guaranty_owner"></span><br>
                                        <label>权利范围:</label><span id = "guaranty_scope"></span><br>
                                        <label>状态：</label><span id = "guaranty_state"></span><br>
                                        <label>类型：</label><span id = "guaranty_type"></span><br>
                                        <div class = "house_detail">
                                            <label>地址：</label><span id = "house_addr" ></span><br>
                                            <label>邮编：</label><span id = "house_zip"></span><br>
                                            <label>房产证号:</label><span id = "house_certificatedId"></span><br>
                                        </div>
                                        <div class = "land_detail">
                                            <label>地址:</label><span id = "land_addr"></span><br>
                                            <label>面积：</label><span id = "land_area"></span><br>

                                        </div>
                                        <div class = "machine_detail">
                                            <label>使用天数：</label><span id = "machine_usedDays"></span><br>
                                            <label>生产商：</label><span id = "machine_producer"></span><br>
                                            <label>型号：</label><span id = "machine_model"></span><br>
                                        </div>

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "close_guaranty">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="width: 100%" v-else-if="list_item_str[list_selected_index] == 'company_info_manage'">

                    <div class="searchBar">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="请输入您要查询的企业名" id = "searchText">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button" v-on:click="company_info_manage_easy_search()">查询</button>
                            </span>
                        </div>
                        <div> <button class = "btn searchbtn" data-toggle="modal" data-target="#company_info_manage_search_modal" id = "sModal">高级检索</button></div>
                    </div>
                    <table class="content_table">
                        <thead>
                        <tr>
                            <th class="table_head">企业名称</th>
                            <th class="table_head">操作</th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <td colspan="2">
                                <div class="page_change_container" v-if="max_page > 0">
                                    <label v-if="current_page > 0" class="page_change" v-on:click="company_info_manage_aimed_page(1)">首页</label>
                                    <label v-if="current_page > 1" class="page_change" v-on:click="company_info_manage_aimed_page(current_page - 1)">上一页</label>
                                    <label v-if="current_page > 2" class="page_change" v-on:click="company_info_manage_aimed_page(current_page - 2)">{{ current_page - 2 }}</label>
                                    <label v-if="current_page > 1" class="page_change" v-on:click="company_info_manage_aimed_page(current_page - 1)">{{ current_page - 1 }}</label>
                                    <label class="current_page" v-if="current_page > 0">{{ current_page }}</label>
                                    <label v-if="current_page < max_page" class="page_change" v-on:click="company_info_manage_aimed_page(current_page + 1)">{{ current_page + 1 }}</label>
                                    <label v-if="current_page + 1 < max_page" class="page_change" v-on:click="company_info_manage_aimed_page(current_page + 2)">{{ current_page + 2 }}</label>
                                    <label v-if="current_page < max_page" class="page_change" v-on:click="company_info_manage_aimed_page(current_page + 1)">下一页</label>
                                    <label v-if="current_page > 0" class="page_change" v-on:click="company_info_manage_aimed_page(max_page)">尾页</label>
                                </div>
                                <div class="page_change_container" v-else>
                                    无内容
                                </div>
                            </td>
                        </tr>
                        </tfoot>
                        <tr v-for="item in company_info_manage_companies">
                            <td class="table_cell">{{ item.name }}</td>
                            <td class="table_cell">
                                <label v-on:click="company_info_manage_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看详情</label>
                                <label v-on:click="company_info_manage_send_message_click(item)" style="cursor: pointer; text-decoration: underline;">发送消息</label>
                                <!--<label v-on:click="company_info_manage_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看信用记录</label>-->
                                <!--<label v-on:click="company_info_manage_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看所有抵押物</label>-->
                                <!--<label v-on:click="company_info_manage_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">注销</label>-->
                            </td>
                        </tr>
                    </table>
                    <!-- 模态框（Modal） -->
                    <form id = "searchForm">
                        <div class="modal fade" id="company_info_manage_search_modal" tabindex="-1" role="dialog" aria-labelledby="company_info_manage_highly_search_modal_label" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h4 class="modal-title" id="company_info_manage_highly_search_modal_label">高级检索</h4>
                                    </div>

                                    <div class="modal-body">

                                        <div class="form-group">
                                            <label for="recipient-name" class="control-label">企业名:</label>
                                            <input type="text" class="form-control" id="company_info_manage_highly_search_company_name" name = "name">
                                        </div>
                                        <div class="form-group">
                                            <label for="recipient-name" class="control-label">企业编号:</label>
                                            <input type="text" class="form-control" id="company_info_manage_highly_search_company_num" name = "accountNum">
                                        </div>
                                        <div class="form-group">
                                            <label for="recipient-name" class="control-label">企业电话:</label>
                                            <input type="text" class="form-control" id="company_info_manage_highly_search_company_tel" name = "telNum">
                                        </div>
                                        <div class="form-group">
                                            <label for="recipient-name" class="control-label">企业邮箱:</label>
                                            <input type="text" class="form-control" id="company_info_manage_highly_search_company_email" name = "email">
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary" data-dismiss="modal" id = "searchbutton" v-on:click="company_info_manage_search()">查询</button>
                                        <button type="button" class="btn btn-default" data-dismiss="modal" id = "company_info_manage_highly_search_close">关闭</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <div class="modal fade" id="company_info_manage_view_detail_detial_modal" tabindex="-1" role="dialog" aria-labelledby="company_info_manage_view_detail" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="company_info_manage_view_detail">企业详情</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group" id = "company_info_manage_view_detail_company_detail">
                                        <label>名称：</label><span id = "company_info_manage_view_detail_company_name"></span><br>
                                        <label>电话：</label><span id = "company_info_manage_view_detail_company_tel"></span><br>
                                        <label>邮件:</label><span id = "company_info_manage_view_detail_company_email"></span><br>
                                        <label>信用:</label><span id = "company_info_manage_view_detail_company_credit"></span><br>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "company_info_manage_view_detail_close">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="company_info_manage_send_message_modal" tabindex="-1" role="dialog" aria-labelledby="company_info_manage_view_detail" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="company_info_manage_send_message_header"></h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group" id = "company_info_manage_send_message_content_box" style="width: 100%">
                                        <textarea class="form-control" rows="10" id="company_info_manage_send_message_content" style="width: 100%;">

                                        </textarea>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success" data-dismiss="modal" id = "company_info_send_message_send">发送</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="width: 100%" v-else-if="list_item_str[list_selected_index] == 'guaranty_to_mortgaging'">
                    <table class="content_table">
                        <thead>
                        <tr>
                            <th class="table_head">抵押物名称</th>
                            <th class="table_head">操作</th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <td colspan="2">
                                <div class="page_change_container" v-if="max_page > 0">
                                    <label v-if="current_page > 0" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(1)">首页</label>
                                    <label v-if="current_page > 1" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page - 1)">上一页</label>
                                    <label v-if="current_page > 2" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page - 2)">{{ current_page - 2 }}</label>
                                    <label v-if="current_page > 1" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page - 1)">{{ current_page - 1 }}</label>
                                    <label class="current_page" v-if="current_page > 0">{{ current_page }}</label>
                                    <label v-if="current_page < max_page" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page + 1)">{{ current_page + 1 }}</label>
                                    <label v-if="current_page + 1 < max_page" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page + 2)">{{ current_page + 2 }}</label>
                                    <label v-if="current_page < max_page" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(current_page + 1)">下一页</label>
                                    <label v-if="current_page > 0" class="page_change" v-on:click="guaranty_to_mortgaging_aimed_page(max_page)">尾页</label>
                                </div>
                                <div class="page_change_container" v-else>
                                    无内容
                                </div>
                            </td>
                        </tr>
                        </tfoot>
                        <tr v-for="item in guaranty_to_mortgaging_guaranty">
                            <td class="table_cell">{{ item.name }}</td>
                            <td class="table_cell">
                                <label v-on:click="guaranty_to_mortgaging_confirm_to_mortgage(item)" style="cursor: pointer; text-decoration: underline;">确认</label>&nbsp;&nbsp;
                                <label v-on:click="guaranty_to_mortgaging_view_detail_click(item)" style="cursor: pointer; text-decoration: underline;">查看详情</label>
                            </td>
                    </table>

                    <!-- 模态框（Modal） -->
                    <div class="modal fade" id="guaranty_to_mortgaging_detail_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">抵押物详情</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group" id = "guaranty_to_mortgaging_guaranty_detail">
                                        <label>名称：</label><span id = "guaranty_to_mortgaging_guaranty_name"></span><br>
                                        <label>估值：</label><span id = "guaranty_to_mortgaging_guaranty_value"></span><br>
                                        <label>拥有者姓名:</label><span id = "guaranty_to_mortgaging_guaranty_owner"></span><br>
                                        <label>权利范围:</label><span id = "guaranty_to_mortgaging_guaranty_scope"></span><br>
                                        <label>状态：</label><span id = "guaranty_to_mortgaging_guaranty_state"></span><br>
                                        <label>类型：</label><span id = "guaranty_to_mortgaging_guaranty_type"></span><br>
                                        <div class = "house_detail">
                                            <label>地址：</label><span id = "guaranty_to_mortgaging_house_addr" ></span><br>
                                            <label>邮编：</label><span id = "guaranty_to_mortgaging_house_zip"></span><br>
                                            <label>房产证号:</label><span id = "guaranty_to_mortgaging_house_certificatedId"></span><br>
                                        </div>
                                        <div class = "land_detail">
                                            <label>地址:</label><span id = "guaranty_to_mortgaging_land_addr"></span><br>
                                            <label>面积：</label><span id = "guaranty_to_mortgaging_land_area"></span><br>

                                        </div>
                                        <div class = "machine_detail">
                                            <label>使用天数：</label><span id = "guaranty_to_mortgaging_machine_usedDays"></span><br>
                                            <label>生产商：</label><span id = "guaranty_to_mortgaging_machine_producer"></span><br>
                                            <label>型号：</label><span id = "guaranty_to_mortgaging_machine_model"></span><br>
                                        </div>

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "guaranty_to_mortgaging">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>





                </div>


            </div>
        </div>
        <script>
            function isEmptyValue(value) {
                if (value === null) {
                    return true;
                }
                var type = typeof(value);
                switch (type) {
                    case 'number':
                        return isNaN(value);
                    case 'function':
                        return false;
                    case 'object':
                        for (var key in value) {
                            return false;
                        }
                        return true;
                    case 'string':
                        if (value.length > 0) {
                            return false;
                        }
                        return true;
                    case 'boolean':
                        return false;
                    case 'undefined':
                        return true;
                }
            };
            var for_header = new Vue({
                el: '#body_header',
                data: {
                    'bank_name': window.bank_name,
                },
                methods: {
                    reload_page: function () {
                        window.location.reload();
                    },
                    log_out: function () {
                        setCookie('user_id_token', '', -1);
                        window.location.reload();
                    }
                }
            });
            var main_body = new Vue({
                el: '#main_body',
                data: {
                    list_item_str:['repay_confirm', 'login_apply', 'guaranty_to_tbc', 'company_info_manage', 'guaranty_to_mortgaging'],
                    list_item_data: {
                        'repay_confirm': {
                            label_text: '企业还贷申请',
                        },
                        'login_apply': {
                            label_text: '企业注册申请管理',
                        },
                        'guaranty_to_tbc': {
                            label_text: '抵押物上链管理',
                        },
                        'company_info_manage': {
                            label_text: '企业信息管理'
                        },
                        'guaranty_to_mortgaging': {
                            label_text: '抵押申请管理'
                        },
                    },
                    list_selected_class: 'item_selected',
                    list_selected_index: -1,


                    //company和guaranty共同使用current_page和max_page表示当前选中的项中数据的最大页和当前页.
                    current_page:-1,
                    max_page :-1,


                    //repay_confirm中的guaranty及其state
                    repay_confirm_guaranty:[],
                    repay_confirm_guaranty_state:[],

                    //login_application中的company及其state
                    login_apply_company: [],
                    login_apply_company_state: null,

                    //guaranty_to_tbc中的guaranty及其state
                    qualified_guaranties:[],
                    qualified_guaranty_states:[],


                    //company_info_manage中的 type. company, search_data
                    company_info_manage_type:'all',
                    company_info_manage_companies:[],
                    company_info_manage_search_data:'',



                    //guaranty_to_mortgaging中的guaranty和state
                    guaranty_to_mortgaging_guaranty: [],
                    guaranty_to_mortgaging_states: [],


                    states_word: ['鉴定中', '不合格', '合格', '待确认', '可抵押', '申请抵押中', '申请已通过', '申请还款中', '逾期'],
                    type_word:['房产','地产','机器'],
                    scope_of_right_word:['整体','部分'],
                },
                methods: {
                    select_item: function (index) {
                        this.list_selected_index = index;
                        switch (this.list_item_str[index]) {
                            case 'repay_confirm':
                                this.display_repay_confirm_table();
                                break;
                            case 'login_apply':
                                this.display_login_apply_table();
                                break;
                            case 'guaranty_to_tbc':
                                this.display_guaranty_to_tbc_table();
                                break;
                            case 'company_info_manage':
                                this.company_info_manage_type = 'all';
                                this.company_info_manage_companies = [];
                                this.company_info_manage_search_data = '';
                                this.company_info_manage_display_table();
                                break;
                            case 'guaranty_to_mortgaging':
                                this.display_guaranty_to_mortgaging_table();
                                break;
                        }
                    },


                    //银行审核企业申请的信息所需要的函数
                    login_apply_company_states_to_string() {
                        var result = '';
                        for (var i = 0; i < this.login_apply_company_state.length; i++) {
                            if (i > 0) {
                                result = result + "&";
                            }
                            result = result + "states=" + this.login_apply_company_state[i];
                        }
                        return result;
                    },
                    login_apply_get_company(page) {
                        var query_para = '?' + this.login_apply_company_states_to_string() + "&page=" + page.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/companies' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        return result;
                    },
                    login_apply_get_company_max_page() {
                        var query_para = '?' + this.login_apply_company_states_to_string();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/companyMaxPage' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            },
                        });
                        return result;
                    },
                    login_apply_company_aimed_page(page) {
                        var companies = this.login_apply_get_company(page);
                        if (!isEmptyValue(companies)) {
                            this.current_page = page;
                            this.login_apply_company = companies;
                        }
                    },
                    display_login_apply_table(){
                        this.login_apply_company_state = ['checking_2'];
                        this.login_apply_company = [];
                        this.max_page = 0;
                        this.current_page = 0;
                        var max_page_data = this.login_apply_get_company_max_page();
                        if (!isEmptyValue(max_page_data) && !isEmptyValue(max_page_data.maxPage) && max_page_data.maxPage > 0) {
                            this.max_page = max_page_data.maxPage;
                            this.login_apply_company = this.login_apply_get_company(1);
                            this.current_page = 1;
                        } else {
                            this.max_page = 0;
                        }
                    },
                    login_apply_view_company_detail_click(item){
                        var query_para = '?accountNum=' + item.accountNum.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/companyDetail' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        var company = result;
                        var modal = $('#company_detail_model');
                        modal.find('#company_name').html(company.name);
                        modal.find('#company_tel').html(company.telNum);
                        modal.find('#company_email').html(company.emailAddress);
                        modal.find('#company_credit').html(company.credit);
                        modal.modal('show');
                    },
                    login_apply_company_pass_login_click(item){
                        bootbox.confirm({
                            message: "您确定要通过该企业注册申请吗？",
                            buttons: {
                                confirm: {
                                    label: '确认',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: '返回',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result){
                                    var influence = null;
                                    $.ajax({
                                        'url': '/api/user/bank/authorityRequest/approve',
                                        'type': 'PUT',
                                        'data':{
                                            'accountNum':item.accountNum,
                                        },
                                        'async': false,
                                        'success': function(data) {
                                            influence = data;
                                        },
                                        'headers': {
                                            'user_id_token': getCookie('user_id_token'),
                                        }
                                    });
                                    if (influence.influence > 0 ){
                                        main_body.display_login_apply_table();
                                    } else {
                                        //错误提示
                                    }
                                }
                            }
                        });
                    },
                    login_apply_company_unpass_login_click(item){
                        bootbox.confirm({
                            message: "您确定要拒绝该企业注册申请吗？",
                            buttons: {
                                confirm: {
                                    label: '确认',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: '返回',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result){
                                    var influence = null;
                                    $.ajax({
                                        'url': '/api/user/bank/authorityRequest/reject',
                                        'type': 'PUT',
                                        'data':{
                                            'accountNum':item.accountNum,
                                        },
                                        'async': false,
                                        'success': function(data) {
                                            influence = data;
                                        },
                                        'headers': {
                                            'user_id_token': getCookie('user_id_token'),
                                        }
                                    });
                                    if (influence.influence > 0) {
                                        main_body.display_login_apply_table();

                                    } else{
                                        //错误提示
                                    }
                                }
                            }
                        });
                    },


                    //银行审核抵押物  从合格到待确认
                    to_tbc_qualified_guaranty_states_to_string() {
                        var query_para = '';
                        for (var i = 0; i < this.qualified_guaranty_states.length; i++) {
                            if (i > 0) {
                                query_para = query_para + '&'
                            }
                            query_para = query_para + 'states=' + this.qualified_guaranty_states[i].toString();
                        }
                        return query_para;
                    },
                    to_tbc_get_guaranty(page) {
                        var query_para = '?' + this.to_tbc_qualified_guaranty_states_to_string() + "&page=" + page.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/guaranties' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        return result;
                    },
                    to_tbc_get_guaranty_max_page() {
                        var query_para = '?' + this.to_tbc_qualified_guaranty_states_to_string();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/guarantyMaxPage' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            },
                        });
                        return result;
                    },
                    to_tbc_aimed_page(page) {
                        var guaranties = this.to_tbc_get_guaranty(page);

                        if (!isEmptyValue(guaranties)) {
                            this.current_page = page;
                            this.qualified_guaranties = guaranties;
                        }
                    },
                    display_guaranty_to_tbc_table(){
                        this.qualified_guaranty_states = [2];
                        this.qualified_guaranties = [];
                        this.max_page = 0;
                        this.current_page = 0;
                        var max_page_data = this.to_tbc_get_guaranty_max_page();
                        if (!isEmptyValue(max_page_data) && !isEmptyValue(max_page_data.maxPage) && max_page_data.maxPage > 0) {
                            this.max_page = max_page_data.maxPage;
                            this.qualified_guaranties = this.to_tbc_get_guaranty(1);
                            this.current_page = 1;
                        } else {
                            this.max_page = 0;
                        }

                    },
                    guaranty_to_tbc_view_detail_click(item){
                        var url = null;
                        switch(item.type){
                            case 0:
                                url = '/api/user/bank/companyRequest/houseDetail'
                                break;
                            case 1:
                                url = '/api/user/bank/companyRequest/landDetail'
                                break;
                            case 2:
                                url = '/api/user/bank/companyRequest/machineDetail'
                                break;
                        }
                        var query_para = '?guarantyId='+ item.guarantyId.toString();
                        var result = null;
                        $.ajax({
                            'url': url + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        var guaranty = result;
                        var modal = $('#guaranty_detail_modal');
                        modal.find('#guaranty_name').html(guaranty.name);
                        modal.find('#guaranty_value').html(guaranty.evaluationValue);
                        modal.find('#guaranty_owner').html(guaranty.ownerName);
                        modal.find('#guaranty_scope').html(this.scope_of_right_word[guaranty.scopeOfRight]);
                        modal.find('#guaranty_state').html(this.states_word[guaranty.state]);
                        modal.find('#guaranty_type').html(this.type_word[guaranty.type]);
                        switch(item.type){
                            case 0:
                                modal.find('#house_addr').html(guaranty.addr);
                                modal.find('#house_zip').html(guaranty.zip);
                                modal.find('#house_certificatedId').html(guaranty.housingCertificatedId);
                                $('.house_detail').css("display","inline");
                                break;
                            case 1:
                                modal.find('#land_addr').html(guaranty.addr);
                                modal.find('#land_area').html(guaranty.area);
                                $('.land_detail').css("display","inline");
                                break;
                            case 2:
                                modal.find('#machine_producer').html(guaranty.producer);
                                modal.find('#machine_model').html(guaranty.model);
                                modal.find('#machine_usedDays').html(guaranty.usedDays);
                                $('.machine_detail').css("display","inline");
                                break;
                        }
                        modal.modal('show');
                    },
                    guaranty_to_tbc_confirm_to_tbc(item){
                        bootbox.confirm({
                            message: "您确定要确认该抵押物鉴定结果吗？",
                            buttons: {
                                confirm: {
                                    label: '确认',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: '返回',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result){
                                    var influence = null;
                                    $.ajax({
                                        'url': '/api/user/bank/authorityRequest/toTBCList',
                                        'type': 'PUT',
                                        'data':{
                                            'guarantyId':item.guarantyId,
                                        },
                                        'async': false,
                                        'success': function(data) {
                                            influence = data;
                                        },
                                        'headers': {
                                            'user_id_token': getCookie('user_id_token'),
                                        }
                                    });
                                    if (influence.influence > 0) {
                                        main_body.display_guaranty_to_tbc_table();
                                    } else {
                                        //错误提示
                                    }
                                }
                            }
                        });
                    },



                    //银行审核贷款申请, 是否同意
                    repay_confirm_guaranty_states_to_string() {
                        var query_para = '';
                        for (var i = 0; i < this.repay_confirm_guaranty_state.length; i++) {
                            if (i > 0) {
                                query_para = query_para + '&'
                            }
                            query_para = query_para + 'states=' + this.repay_confirm_guaranty_state[i].toString();
                        }
                        return query_para;
                    },
                    repay_confirm_get_guaranty(page) {
                        var query_para = '?' + this.repay_confirm_guaranty_states_to_string() + "&page=" + page.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/companyRequest/guaranties' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        return result;
                    },
                    repay_confirm_get_max_page() {
                        var query_para = '?' + this.repay_confirm_guaranty_states_to_string();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/companyRequest/maxPage' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            },
                        });
                        return result;
                    },
                    repay_confirm_aimed_page(page) {
                        var guaranties = this.repay_confirm_get_guaranty(page);

                        if (!isEmptyValue(guaranties)) {
                            this.current_page = page;
                            this.repay_confirm_guaranty = guaranties;
                        }
                    },
                    display_repay_confirm_table: function () {
                        this.repay_confirm_guaranty_state = [0];
                        this.repay_confirm_guaranty = [];
                        this.max_page = 0;
                        this.current_page = 0;
                        var max_page_data = this.repay_confirm_get_max_page();
                        if (!isEmptyValue(max_page_data) && !isEmptyValue(max_page_data.maxPage) && max_page_data.maxPage > 0) {
                            this.max_page = max_page_data.maxPage;
                            this.repay_confirm_guaranty = this.repay_confirm_get_guaranty(1);
                            this.current_page = 1;
                        } else {
                            this.max_page = 0;
                        }
                    },
                    repay_confirm_view_detail_click(item){
                        var url = null;
                        switch(item.type){
                            case 0:
                                url = '/api/user/bank/companyRequest/houseDetail'
                                break;
                            case 1:
                                url = '/api/user/bank/companyRequest/landDetail'
                                break;
                            case 2:
                                url = '/api/user/bank/companyRequest/machineDetail'
                                break;
                        }
                        var query_para = '?guarantyId=' + item.guarantyId.toString();
                        var result = null;
                        $.ajax({
                            'url': url + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        var guaranty = result;
                        var modal = $('#repay_confirm_detail_modal');
                        modal.find('#repay_confirm_guaranty_name').html(guaranty.name);
                        modal.find('#repay_confirm_guaranty_value').html(guaranty.evaluationValue);
                        modal.find('#repay_confirm_guaranty_owner').html(guaranty.ownerName);
                        modal.find('#repay_confirm_guaranty_scope').html(this.scope_of_right_word[guaranty.scopeOfRight]);
                        modal.find('#repay_confirm_guaranty_state').html(this.states_word[guaranty.state]);
                        modal.find('#repay_confirm_guaranty_type').html(this.type_word[guaranty.type]);
                        switch(item.type){
                            case 0:
                                modal.find('#repay_confirm_house_addr').html(guaranty.addr);
                                modal.find('#repay_confirm_house_zip').html(guaranty.zip);
                                modal.find('#repay_confirm_house_certificatedId').html(guaranty.housingCertificatedId);
                                $('.house_detail').css("display","inline");
                                break;
                            case 1:
                                modal.find('#repay_confirm_land_addr').html(guaranty.addr);
                                modal.find('#repay_confirm_land_area').html(guaranty.area);
                                $('.land_detail').css("display","inline");
                                break;
                            case 2:
                                modal.find('#repay_confirm_machine_producer').html(guaranty.producer);
                                modal.find('#repay_confirm_machine_model').html(guaranty.model);
                                modal.find('#repay_confirm_machine_usedDays').html(guaranty.usedDays);
                                $('.machine_detail').css("display","inline");
                                break;
                        }
                        modal.modal('show');
                    },
                    repay_confirm_confirm_repay_click(item){
                        bootbox.confirm({
                            message: "您确定要通过该还贷申请吗？",
                            buttons: {
                                confirm: {
                                    label: '确认',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: '返回',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result){
                                    var influence = null;
                                    $.ajax({
                                        'url': '/api/user/bank/companyRequest/repay',
                                        'type': 'PUT',
                                        'data':{
                                            'guarantyId':item.guarantyId,
                                        },
                                        'async': false,
                                        'success': function(data) {
                                            influence = data;
                                        },
                                        'headers': {
                                            'user_id_token': getCookie('user_id_token'),
                                        }
                                    });
                                    if(influence>0){
                                        main_body.display_repay_confirm_table();
                                    }else{
                                        //错误提示
                                    }
                                }
                            }
                        });
                    },


                    //银行管理企业信息所需函数
                    company_info_manage_get_company(page) {
                        var url = null;
                        if (this.company_info_manage_type == 'all') {
                            var query_para = "?currentPage=" + page.toString();
                            url = '/api/bank/infoManagement/company/allCompanyInfo' + query_para;
                        } else if (this.company_info_manage_type == 'search') {
                            var query_para = "?" + this.company_info_manage_search_data + "&currentPage=" + page.toString();
                            url = '/api/bank/infoManagement/company/allCompanyInfo/search' + query_para;
                        }
                        var result = null;
                        $.ajax({
                            'url': url,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        return result;
                    },
                    company_info_manage_get_max_page() {
                        var url = null;
                        if (this.company_info_manage_type == 'all') {
                            url = '/api/bank/infoManagement/company/getMaxPage'
                        } else if(this.company_info_manage_type == 'search'){
                            var query_para = "?"+this.company_info_manage_search_data;
                            url = '/api/bank/infoManagement/company/allCompanyInfo/search/getMaxPage' + query_para;
                        }
                        var result = null;
                        $.ajax({
                            'url': url,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            },
                        });
                        return result;
                    },
                    company_info_manage_aimed_page(page) {
                        var companies = this.company_info_manage_get_company(page);
                        if (!isEmptyValue(companies)) {
                            this.current_page = page;
                            this.company_info_manage_companies = companies;
                        }
                    },
                    company_info_manage_search(){
                        this.company_info_manage_type = 'search';
                        this.company_info_manage_search_data = $('form').serialize();
                        if (this.company_info_manage_search_data == "name=&accountNum=&telNum=&email=") {
                            bootbox.alert("请至少输入一项查询内容");
                            return false;
                        }
                        $('#searchForm input').val("");
                        this.company_info_manage_display_table();
                    },
                    company_info_manage_easy_search(){
                        this.company_info_manage_type = 'search';
                        var searchValue = $('#searchText').val();
                        if (searchValue==""){
                            bootbox.alert("请输入您要查询的企业名");
                            return false;
                        }
                        this.company_info_manage_search_data = 'name=' + searchValue;
                        this.company_info_manage_display_table();
                    },
                    company_info_manage_display_table(){
                        var max_page_data = this.company_info_manage_get_max_page();
                        if (!isEmptyValue(max_page_data) && max_page_data.maxPage > 0) {
                            this.max_page = max_page_data.maxPage;
                            this.company_info_manage_companies = this.company_info_manage_get_company(1);
                            this.current_page = 1;
                        } else {
                            this.company_info_manage_companies = [];
                            this.max_page = 0;
                        }
                    },
                    company_info_manage_view_detail_click(item){
                        var query_para = '?accountNum=' + item.accountNum.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/companyDetail' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        var company = result;
                        var modal = $('#company_info_manage_view_detail_detial_modal');
                        modal.find('#company_info_manage_view_detail_company_name').html(company.name);
                        modal.find('#company_info_manage_view_detail_company_tel').html(company.telNum);
                        modal.find('#company_info_manage_view_detail_company_email').html(company.emailAddress);
                        modal.find('#company_info_manage_view_detail_company_credit').html(company.credit);
                        modal.modal('show');
                    },
                    company_info_manage_send_message_click(item) {
                        // var query_para = '?accountNum=' + item.accountNum.toString();
                        // var result = null;
                        // $.ajax({
                        //     'url': '/api/user/bank/authorityRequest/companyDetail' + query_para,
                        //     'type': 'GET',
                        //     'async': false,
                        //     'success': function(data) {
                        //         result = data;
                        //     },
                        //     'headers': {
                        //         'user_id_token': getCookie('user_id_token'),
                        //     }
                        // });
                        // var company = result;
                        var modal = $('#company_info_manage_send_message_modal');
                        modal.find('#company_info_manage_send_message_header').html('To ' + item.name);
                        modal.find('#company_info_send_message_send').click(function () {
                            $.ajax({
                                url: '/api/message/',
                                type: 'POST',
                                async: false,
                                data: {
                                    content: modal.find('#company_info_manage_send_message_content').val(),
                                    toUserId: item.accountNum,
                                },
                                headers: {
                                    user_id_token: getCookie('user_id_token'),
                                },
                                success: function(data) {
                                    alert("发送成功");
                                }
                            });
                        });
                        modal.modal('show');
                    },


                    //通过贷款请求所需函数
                    guaranty_to_mortgaging_states_to_string() {
                        var query_para = '';
                        for (var i = 0; i < this.guaranty_to_mortgaging_states.length; i++) {
                            if (i > 0) {
                                query_para = query_para + '&'
                            }
                            query_para = query_para + 'states=' + this.guaranty_to_mortgaging_states[i].toString();
                        }
                        return query_para;
                    },
                    guaranty_to_mortgaging_get_guaranty(page) {
                        var query_para = '?' + this.guaranty_to_mortgaging_states_to_string() + "&page=" + page.toString();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/guaranties' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        return result;
                    },
                    guaranty_to_mortgaging_max_page() {
                        var query_para = '?' + this.guaranty_to_mortgaging_states_to_string();
                        var result = null;
                        $.ajax({
                            'url': '/api/user/bank/authorityRequest/guarantyMaxPage' + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            },
                        });
                        return result;
                    },
                    guaranty_to_mortgaging_aimed_page(page) {
                        var guaranties = this.guaranty_to_mortgaging_get_guaranty(page);

                        if (!isEmptyValue(guaranties)) {
                            this.current_page = page;
                            this.guaranty_to_mortgaging_guaranty = guaranties;
                        }
                    },
                    display_guaranty_to_mortgaging_table() {
                        this.guaranty_to_mortgaging_states = [5];
                        this.guaranty_to_mortgaging_guaranty = [];
                        this.max_page = 0;
                        this.current_page = 0;
                        var max_page_data = this.guaranty_to_mortgaging_max_page();
                        if (!isEmptyValue(max_page_data) && !isEmptyValue(max_page_data.maxPage) && max_page_data.maxPage > 0) {
                            this.max_page = max_page_data.maxPage;
                            this.guaranty_to_mortgaging_guaranty = this.guaranty_to_mortgaging_get_guaranty(1);
                            this.current_page = 1;
                        } else {
                            this.max_page = 0;
                        }
                    },
                    guaranty_to_mortgaging_view_detail_click(item) {
                        var url = null;
                        switch(item.type){
                            case 0:
                                url = '/api/user/bank/companyRequest/houseDetail'
                                break;
                            case 1:
                                url = '/api/user/bank/companyRequest/landDetail'
                                break;
                            case 2:
                                url = '/api/user/bank/companyRequest/machineDetail'
                                break;
                        }
                        var query_para = '?guarantyId='+ item.guarantyId.toString();
                        var result = null;
                        $.ajax({
                            'url': url + query_para,
                            'type': 'GET',
                            'async': false,
                            'success': function(data) {
                                result = data;
                            },
                            'headers': {
                                'user_id_token': getCookie('user_id_token'),
                            }
                        });
                        var guaranty = result;
                        var modal = $('#guaranty_to_mortgaging_detail_modal');
                        modal.find('#guaranty_to_mortgaging_guaranty_name').html(guaranty.name);
                        modal.find('#guaranty_to_mortgaging_guaranty_value').html(guaranty.evaluationValue);
                        modal.find('#guaranty_to_mortgaging_guaranty_owner').html(guaranty.ownerName);
                        modal.find('#guaranty_to_mortgaging_guaranty_scope').html(this.scope_of_right_word[guaranty.scopeOfRight]);
                        modal.find('#guaranty_to_mortgaging_guaranty_state').html(this.states_word[guaranty.state]);
                        modal.find('#guaranty_to_mortgaging_guaranty_type').html(this.type_word[guaranty.type]);
                        switch(item.type){
                            case 0:
                                modal.find('#guaranty_to_mortgaging_house_addr').html(guaranty.addr);
                                modal.find('#guaranty_to_mortgaging_house_zip').html(guaranty.zip);
                                modal.find('#guaranty_to_mortgaging_house_certificatedId').html(guaranty.housingCertificatedId);
                                $('.house_detail').css("display","inline");
                                break;
                            case 1:
                                modal.find('#guaranty_to_mortgaging_land_addr').html(guaranty.addr);
                                modal.find('#guaranty_to_mortgaging_land_area').html(guaranty.area);
                                $('.land_detail').css("display","inline");
                                break;
                            case 2:
                                modal.find('#guaranty_to_mortgaging_machine_producer').html(guaranty.producer);
                                modal.find('#guaranty_to_mortgaging_machine_model').html(guaranty.model);
                                modal.find('#guaranty_to_mortgaging_machine_usedDays').html(guaranty.usedDays);
                                $('.machine_detail').css("display","inline");
                                break;
                        }
                        modal.modal('show');

                    },
                    guaranty_to_mortgaging_confirm_to_mortgage(item) {
                        bootbox.confirm({
                            message: "您确定要通过该抵押请求吗？",
                            buttons: {
                                confirm: {
                                    label: '确认',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: '返回',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result){
                                    var influence = null;
                                    $.ajax({
                                        'url': '/api/user/bank/companyRequest/mortgage',
                                        'type': 'PUT',
                                        'data':{
                                            'guarantyId':item.guarantyId,
                                        },
                                        'async': false,
                                        'success': function(data) {
                                            influence = data;
                                        },
                                        'headers': {
                                            'user_id_token': getCookie('user_id_token'),
                                        }
                                    });
                                    if (influence.influence > 0) {
                                        main_body.display_guaranty_to_mortgaging_table();
                                    } else {
                                        alert("无法操作此抵押物");
                                    }
                                }
                            }
                        });
                    },
                }
            });
        </script>
    </body>
</html>